(function(){"use strict";var e={8730:function(e,n,a){var t=a(9242),o=a(3396);function r(e,n,a,t,r,l){const s=(0,o.up)("Navbar"),i=(0,o.up)("BackgroundRemover");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(s),(0,o.Wm)(i)],64)}const l={class:"navbar navbar-expand-lg navbar-dark bg-dark"},s=(0,o.uE)('<div class="container-fluid px-4"><a class="navbar-brand" href="#">BGRemover</a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ms-auto mb-2 mb-lg-0"><li class="nav-item"><a class="nav-link active" aria-current="page" href="#">Home</a></li></ul></div></div>',1),i=[s];function c(e,n,a,t,r,s){return(0,o.wg)(),(0,o.iD)("nav",l,i)}var g={name:"NavBar",data(){return{}}},d=a(89);const u=(0,d.Z)(g,[["render",c]]);var p=u,m=a(7139);const v=e=>((0,o.dD)("data-v-aa511884"),e=e(),(0,o.Cn)(),e),h={class:"col-lg-6"},f={class:"my-auto mx-auto"},b=v((()=>(0,o._)("h2",{class:"text-center"},[(0,o.Uk)("Drop your photos here or "),(0,o._)("br"),(0,o.Uk)(" simply paste your photo to start converting!")],-1))),y={class:"col-lg-6 d-flex flex-column justify-content-center converted-area"},w=v((()=>(0,o._)("span",null,[(0,o._)("h3",null,"Files converted")],-1))),D=v((()=>(0,o._)("br",null,null,-1))),_=v((()=>(0,o._)("br",null,null,-1))),k=["onClick"],I=["href"],U={key:0,class:"spinner-border text-primary",role:"status"},x=v((()=>(0,o._)("span",{class:"visually-hidden"},"Loading...",-1))),R=[x];function C(e,n,a,r,l,s){const i=(0,o.up)("ConvertResult");return(0,o.wg)(),(0,o.iD)("div",{class:"row m-3 mx-2",onPaste:n[7]||(n[7]=(...e)=>s.handlePaste&&s.handlePaste(...e))},[(0,o._)("div",h,[(0,o._)("div",{class:(0,m.C_)(["container d-flex main border-5 border-primary",{dragging:l.dragging}]),onDragover:n[2]||(n[2]=(0,t.iM)(((...e)=>s.onDragEnter&&s.onDragEnter(...e)),["prevent"])),onDragenter:n[3]||(n[3]=(0,t.iM)(((...e)=>s.onDragEnter&&s.onDragEnter(...e)),["prevent"])),onDragleave:n[4]||(n[4]=(0,t.iM)(((...e)=>s.onDragLeave&&s.onDragLeave(...e)),["prevent"])),onDrop:n[5]||(n[5]=(0,t.iM)(((...e)=>s.onDrop&&s.onDrop(...e)),["prevent"]))},[(0,o._)("span",f,[b,(0,o._)("input",{type:"file",ref:"imageUpload",multiple:"",onChange:n[0]||(n[0]=(...e)=>s.handleImageUpload&&s.handleImageUpload(...e)),style:{display:"none"}},null,544),(0,o._)("button",{type:"button",onClick:n[1]||(n[1]=(...e)=>s.uploadImages&&s.uploadImages(...e)),class:"btn btn-primary mt-2"},"Convert now")])],34)]),(0,o._)("div",y,[w,D,(0,o._)("div",{class:"col overflow-auto",ref:"results",onResize:n[6]||(n[6]=(...n)=>e.handleResize&&e.handleResize(...n))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.converted_photos,((e,n)=>((0,o.wg)(),(0,o.iD)("div",{class:"row",key:n},[(0,o._)("h4",null,(0,m.zw)(e.name),1),_,(0,o._)("span",null,[(0,o._)("button",{type:"button",class:"btn btn-primary my-2 me-2",onClick:n=>s.downloadImage(e.url,e.name)},"Download image",8,k),(0,o._)("a",{name:"",id:"",class:"btn btn-success",href:l.donate_url,role:"button"},"Donate",8,I)]),(0,o.Wm)(i,{src:e.url},null,8,["src"])])))),128)),l.loading?((0,o.wg)(),(0,o.iD)("div",U,R)):(0,o.kq)("",!0)],544)])],32)}a(7658);const O={alt:"Image from Flask server",class:"convphoto mb-2"};function F(e,n,a,t,r,l){return(0,o.wg)(),(0,o.iD)("img",O)}var j={name:"ConvertResult",data(){return{imageSrc:null}}};const E=(0,d.Z)(j,[["render",F],["__scopeId","data-v-1a644910"]]);var B=E,L={name:"BackgroundRemover",components:{ConvertResult:B},data(){return{dragging:!1,imageUrl:"",imageSrc:"",converted_photos:[],loading:!1,donate_url:"https://dashboard.stripe.com/payment-links/plink_1N915UA59UOU3oHiUoiafcpB"}},methods:{onDragEnter(){this.dragging=!0},onDragLeave(){this.dragging=!1},onDrop(e){const n=e.dataTransfer.files;for(let a=0;a<n.length;a++){const e=n[a];e.type.startsWith("image/")?this.handleImageFile(e):console.log("Not an image file:",e.name)}},async handleImageFile(e){console.log("Image file:",e.name),this.loading=!0;const n=new FileReader,a=new FormData;a.append("image",e);try{const e=await fetch("https://server.polymathlearning.app/upload",{method:"POST",body:a});if(e.ok){const n=await e.blob();console.log("Success:",n);let a=this.converted_photos.length,t=URL.createObjectURL(n);this.converted_photos.push({name:"image"+String(a+1)+".png",url:t})}else console.error("Failed to fetch image from server")}catch(t){console.error("Error:",t)}n.onload=e=>{console.log("Image data URL:",e.target.result),this.loading=!1,this.scrollDown()},n.readAsDataURL(e)},scrollDown(){this.$nextTick((()=>{const e=this.$refs.results;console.log(e.scrollHeight),e.scrollTop=e.scrollHeight}))},uploadImages(){this.$refs.imageUpload.click()},handleImageUpload(e){const n=e.target.files;for(let a=0;a<n.length;a++){const e=n[a];this.handleImageFile(e),e.type.startsWith("image/")?console.log("Image file:",e):console.log("Not an image file:",e)}},async processImageBlob(e){const n=new File([e],"image.jpg",{type:"image/jpeg"});this.handleImageFile(n),console.log("Image blob:",e)},async handlePaste(e){e.preventDefault();const n=(e.clipboardData||e.originalEvent.clipboardData).items;for(const a of n){if(-1!==a.type.indexOf("image")){const e=a.getAsFile(),n=new FileReader;return n.onload=e=>{this.imageUrl=e.target.result},n.readAsDataURL(e),void this.processImageBlob(e)}"text/plain"===a.type&&a.getAsString((e=>{if(this.isValidImageUrl(e))return this.imageUrl=e,void fetch(e,{method:"GET",mode:"no-cors"}).then((e=>e.blob())).then((e=>{this.processImageBlob(e)})).catch((e=>{console.error("Failed to fetch image:",e)}))}))}},isValidImageUrl(e){return null!=e.match(/\.(jpeg|jpg|gif|png)$/)},downloadImage(e,n){const a=document.createElement("a");a.href=e,a.download=n,a.click()}}};const S=(0,d.Z)(L,[["render",C],["__scopeId","data-v-aa511884"]]);var T=S,P={name:"App",components:{Navbar:p,BackgroundRemover:T}};const A=(0,d.Z)(P,[["render",r]]);var H=A;(0,t.ri)(H).mount("#app")}},n={};function a(t){var o=n[t];if(void 0!==o)return o.exports;var r=n[t]={exports:{}};return e[t](r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(n,t,o,r){if(!t){var l=1/0;for(g=0;g<e.length;g++){t=e[g][0],o=e[g][1],r=e[g][2];for(var s=!0,i=0;i<t.length;i++)(!1&r||l>=r)&&Object.keys(a.O).every((function(e){return a.O[e](t[i])}))?t.splice(i--,1):(s=!1,r<l&&(l=r));if(s){e.splice(g--,1);var c=o();void 0!==c&&(n=c)}}return n}r=r||0;for(var g=e.length;g>0&&e[g-1][2]>r;g--)e[g]=e[g-1];e[g]=[t,o,r]}}(),function(){a.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(n,{a:n}),n}}(),function(){a.d=function(e,n){for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};a.O.j=function(n){return 0===e[n]};var n=function(n,t){var o,r,l=t[0],s=t[1],i=t[2],c=0;if(l.some((function(n){return 0!==e[n]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(i)var g=i(a)}for(n&&n(t);c<l.length;c++)r=l[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(g)},t=self["webpackChunkwebapp"]=self["webpackChunkwebapp"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=a.O(void 0,[998],(function(){return a(8730)}));t=a.O(t)})();
//# sourceMappingURL=app.a9bf7cf1.js.map